import{S as M,i as W,s as z,k as s,q as N,a as g,l as o,m as u,r as I,h as a,c as E,n as e,b as R,J as t,K as L,W as Q,I as U}from"../../../chunks/index-a598add7.js";import{g as X}from"../../../chunks/navigation-cb28aaf0.js";import{f as K}from"../../../chunks/FeedbackStore-f117c57a.js";function Y(P){let n,c,h,i,r,p,x,C,T,d,G,f,_,D,O,m,V,v,y,q,A,J;return{c(){n=s("h1"),c=N("Goly -- Create New"),h=g(),i=s("div"),r=s("form"),p=s("div"),x=s("span"),C=N("Redirect to"),T=g(),d=s("input"),G=g(),f=s("div"),_=s("span"),D=N("Goly"),O=g(),m=s("input"),V=g(),v=s("div"),y=s("button"),q=N("Create"),this.h()},l(l){n=o(l,"H1",{class:!0});var b=u(n);c=I(b,"Goly -- Create New"),b.forEach(a),h=E(l),i=o(l,"DIV",{class:!0});var $=u(i);r=o($,"FORM",{class:!0});var w=u(r);p=o(w,"DIV",{class:!0});var k=u(p);x=o(k,"SPAN",{});var j=u(x);C=I(j,"Redirect to"),j.forEach(a),T=E(k),d=o(k,"INPUT",{type:!0,class:!0,placeholder:!0,name:!0,autocomplete:!0}),k.forEach(a),G=E(w),f=o(w,"DIV",{class:!0});var S=u(f);_=o(S,"SPAN",{});var B=u(_);D=I(B,"Goly"),B.forEach(a),O=E(S),m=o(S,"INPUT",{type:!0,class:!0,placeholder:!0,name:!0,autocomplete:!0}),S.forEach(a),V=E(w),v=o(w,"DIV",{class:!0});var F=u(v);y=o(F,"BUTTON",{class:!0});var H=u(y);q=I(H,"Create"),H.forEach(a),F.forEach(a),w.forEach(a),$.forEach(a),this.h()},h(){e(n,"class","text-3xl text-sky-500 my-5 text-center"),e(d,"type","text"),e(d,"class","border border-sky-500 rounded-md p-1 w-full"),e(d,"placeholder","https://www.bbc.co.uk"),e(d,"name","redirect"),d.required=!0,e(d,"autocomplete","off"),e(p,"class","flex flex-col w-full py-2"),e(m,"type","text"),e(m,"class","border border-sky-500 rounded-md p-1 w-full"),e(m,"placeholder","Short link or leave blank to have a random one generated"),e(m,"name","goly"),e(m,"autocomplete","off"),e(f,"class","flex flex-col w-full py-2"),e(y,"class","text-white bg-sky-500 rounded-md px-3 py-2 w-full"),e(v,"class","py-5"),e(r,"class","min-w-full"),e(i,"class","flex flex-col mx-auto w-5/6 md:w-1/2 lg:w-1/3 border border-slate-500 rounded-md p-2")},m(l,b){R(l,n,b),t(n,c),R(l,h,b),R(l,i,b),t(i,r),t(r,p),t(p,x),t(x,C),t(p,T),t(p,d),t(r,G),t(r,f),t(f,_),t(_,D),t(f,O),t(f,m),t(r,V),t(r,v),t(v,y),t(y,q),A||(J=L(r,"submit",Q(P[0])),A=!0)},p:U,i:U,o:U,d(l){l&&a(n),l&&a(h),l&&a(i),A=!1,J()}}}function Z(P){return[async c=>{try{const h={redirect:c.target[0].value,goly:c.target[1].value,random:c.target[1].value===""};if(!(await fetch("/api/goly",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}})).ok)throw new Error;K.set("Success: New Goly created!"),X("/")}catch{K.set("Error: An error has occurred. Please try again."),c.target[0].value="",c.target[1].value=""}}]}class re extends M{constructor(n){super(),W(this,n,Z,Y,z,{})}}export{re as default};
