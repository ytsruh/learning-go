import{S as X,i as Q,s as W,M as De,a as k,k as m,c as E,l as g,m as h,h as f,n as v,b as $,N as Ae,O as Ie,P as Pe,f as A,t as G,R as Ne,A as Ge,T as Ue,C as ue,w as Z,x as ee,y as te,D as Ce,E as Le,z as le,F as ye,G as Se,H as Ve,I as K,g as xe,d as we,q as x,r as w,J as p,K as q,L as Te,u as ie,U as ve,V as Be}from"../../chunks/index-a598add7.js";import{g as Re}from"../../chunks/navigation-cb28aaf0.js";import{f as be}from"../../chunks/FeedbackStore-f117c57a.js";import{I as je}from"../../chunks/IconBase-ddedf852.js";const Oe=n=>({}),$e=n=>({copy:n[2]});function qe(n){let e,t,s;const c=n[4].default,a=De(c,n,n[3],$e);return{c(){a&&a.c(),e=k(),t=m("textarea"),this.h()},l(l){a&&a.l(l),e=E(l),t=g(l,"TEXTAREA",{class:!0}),h(t).forEach(f),this.h()},h(){t.value=n[0],v(t,"class","svelte-w8w2mp")},m(l,r){a&&a.m(l,r),$(l,e,r),$(l,t,r),n[5](t),s=!0},p(l,[r]){a&&a.p&&(!s||r&8)&&Ae(a,c,l,l[3],s?Pe(c,l[3],r,Oe):Ie(l[3]),$e),(!s||r&1)&&(t.value=l[0])},i(l){s||(A(a,l),s=!0)},o(l){G(a,l),s=!1},d(l){a&&a.d(l),l&&f(e),l&&f(t),n[5](null)}}}function ze(n,e,t){let{$$slots:s={},$$scope:c}=e;const a=Ne();let{text:l}=e,r;async function _(){r.select(),document.execCommand("Copy"),await Ge(),r.blur(),a("copy")}function o(i){Ue[i?"unshift":"push"](()=>{r=i,t(1,r)})}return n.$$set=i=>{"text"in i&&t(0,l=i.text),"$$scope"in i&&t(3,c=i.$$scope)},[l,r,_,c,s,o]}class Fe extends X{constructor(e){super(),Q(this,e,ze,qe,W,{text:0})}}function He(n){let e;return{c(){e=Se("path"),this.h()},l(t){e=Ve(t,"path",{d:!0}),h(e).forEach(f),this.h()},h(){v(e,"d","M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z")},m(t,s){$(t,e,s)},p:K,d(t){t&&f(e)}}}function Me(n){let e,t;const s=[{viewBox:"0 0 448 512"},n[0]];let c={$$slots:{default:[He]},$$scope:{ctx:n}};for(let a=0;a<s.length;a+=1)c=ue(c,s[a]);return e=new je({props:c}),{c(){Z(e.$$.fragment)},l(a){ee(e.$$.fragment,a)},m(a,l){te(e,a,l),t=!0},p(a,[l]){const r=l&1?Ce(s,[s[0],Le(a[0])]):{};l&2&&(r.$$scope={dirty:l,ctx:a}),e.$set(r)},i(a){t||(A(e.$$.fragment,a),t=!0)},o(a){G(e.$$.fragment,a),t=!1},d(a){le(e,a)}}}function Ye(n,e,t){return n.$$set=s=>{t(0,e=ue(ue({},e),ye(s)))},e=ye(e),[e]}class Je extends X{constructor(e){super(),Q(this,e,Ye,Me,W,{})}}function Ke(n){let e,t,s,c,a,l,r,_,o,i,d,b;return{c(){e=m("div"),t=m("p"),s=x("Are you sure you want to delete?"),c=k(),a=m("div"),l=m("button"),r=x("Yes"),_=k(),o=m("button"),i=x("No"),this.h()},l(I){e=g(I,"DIV",{class:!0});var D=h(e);t=g(D,"P",{class:!0});var U=h(t);s=w(U,"Are you sure you want to delete?"),U.forEach(f),c=E(D),a=g(D,"DIV",{class:!0});var P=h(a);l=g(P,"BUTTON",{class:!0});var S=h(l);r=w(S,"Yes"),S.forEach(f),_=E(P),o=g(P,"BUTTON",{class:!0});var T=h(o);i=w(T,"No"),T.forEach(f),P.forEach(f),D.forEach(f),this.h()},h(){v(t,"class","text-center text-lg"),v(l,"class","bg-sky-500 px-3 py-2 rounded-md text-white"),v(o,"class","bg-sky-900 px-3 py-2 rounded-md text-white"),v(a,"class","flex justify-between pt-3"),v(e,"class","h-full flex flex-col justify-center")},m(I,D){$(I,e,D),p(e,t),p(t,s),p(e,c),p(e,a),p(a,l),p(l,r),p(a,_),p(a,o),p(o,i),d||(b=[q(l,"click",n[3]),q(o,"click",n[2])],d=!0)},p:K,i:K,o:K,d(I){I&&f(e),d=!1,Te(b)}}}function Xe(n){let e,t,s,c,a,l=n[0].goly+"",r,_,o,i,d,b,I,D,U=n[0].redirect+"",P,S,T,R,se,ae,O=n[0].clicked+"",z,F,N,j,V,re,H,oe,B,ne,C,ce,fe;return o=new Fe({props:{text:`goly.ytsruh.com/r/${n[0].goly}`,$$slots:{default:[Qe,({copy:u})=>({5:u}),({copy:u})=>u?32:0]},$$scope:{ctx:n}}}),o.$on("copy",n[4]),{c(){e=m("div"),t=m("p"),s=m("span"),c=x("Goly:"),a=k(),r=x(l),_=k(),Z(o.$$.fragment),i=k(),d=m("p"),b=m("span"),I=x("Redirect:"),D=k(),P=x(U),S=k(),T=m("p"),R=m("span"),se=x("Clicked:"),ae=k(),z=x(O),F=k(),N=m("div"),j=m("button"),V=m("a"),re=x("Update"),oe=k(),B=m("button"),ne=x("Delete"),this.h()},l(u){e=g(u,"DIV",{class:!0});var y=h(e);t=g(y,"P",{});var L=h(t);s=g(L,"SPAN",{class:!0});var de=h(s);c=w(de,"Goly:"),de.forEach(f),a=E(L),r=w(L,l),L.forEach(f),_=E(y),ee(o.$$.fragment,y),y.forEach(f),i=E(u),d=g(u,"P",{});var M=h(d);b=g(M,"SPAN",{class:!0});var _e=h(b);I=w(_e,"Redirect:"),_e.forEach(f),D=E(M),P=w(M,U),M.forEach(f),S=E(u),T=g(u,"P",{});var Y=h(T);R=g(Y,"SPAN",{class:!0});var pe=h(R);se=w(pe,"Clicked:"),pe.forEach(f),ae=E(Y),z=w(Y,O),Y.forEach(f),F=E(u),N=g(u,"DIV",{class:!0});var J=h(N);j=g(J,"BUTTON",{class:!0});var he=h(j);V=g(he,"A",{href:!0});var me=h(V);re=w(me,"Update"),me.forEach(f),he.forEach(f),oe=E(J),B=g(J,"BUTTON",{class:!0});var ge=h(B);ne=w(ge,"Delete"),ge.forEach(f),J.forEach(f),this.h()},h(){v(s,"class","text-sky-900 text-bold text-lg"),v(e,"class","flex justify-between"),v(b,"class","text-sky-900 text-bold text-lg"),v(R,"class","text-sky-900 text-bold text-lg"),v(V,"href",H=`/${n[0].id}`),v(j,"class","bg-sky-500 px-3 py-2 rounded-md text-white"),v(B,"class","bg-sky-900 px-3 py-2 rounded-md text-white"),v(N,"class","flex justify-between pt-3")},m(u,y){$(u,e,y),p(e,t),p(t,s),p(s,c),p(t,a),p(t,r),p(e,_),te(o,e,null),$(u,i,y),$(u,d,y),p(d,b),p(b,I),p(d,D),p(d,P),$(u,S,y),$(u,T,y),p(T,R),p(R,se),p(T,ae),p(T,z),$(u,F,y),$(u,N,y),p(N,j),p(j,V),p(V,re),p(N,oe),p(N,B),p(B,ne),C=!0,ce||(fe=q(B,"click",n[2]),ce=!0)},p(u,y){(!C||y&1)&&l!==(l=u[0].goly+"")&&ie(r,l);const L={};y&1&&(L.text=`goly.ytsruh.com/r/${u[0].goly}`),y&96&&(L.$$scope={dirty:y,ctx:u}),o.$set(L),(!C||y&1)&&U!==(U=u[0].redirect+"")&&ie(P,U),(!C||y&1)&&O!==(O=u[0].clicked+"")&&ie(z,O),(!C||y&1&&H!==(H=`/${u[0].id}`))&&v(V,"href",H)},i(u){C||(A(o.$$.fragment,u),C=!0)},o(u){G(o.$$.fragment,u),C=!1},d(u){u&&f(e),le(o),u&&f(i),u&&f(d),u&&f(S),u&&f(T),u&&f(F),u&&f(N),ce=!1,fe()}}}function Qe(n){let e,t,s,c,a;return t=new Je({}),{c(){e=m("div"),Z(t.$$.fragment),this.h()},l(l){e=g(l,"DIV",{class:!0});var r=h(e);ee(t.$$.fragment,r),r.forEach(f),this.h()},h(){v(e,"class","cursor-pointer text-sky-900 h-4 w-4")},m(l,r){$(l,e,r),te(t,e,null),s=!0,c||(a=[q(e,"click",function(){ve(n[5])&&n[5].apply(this,arguments)}),q(e,"keypress",function(){ve(n[5])&&n[5].apply(this,arguments)})],c=!0)},p(l,r){n=l},i(l){s||(A(t.$$.fragment,l),s=!0)},o(l){G(t.$$.fragment,l),s=!1},d(l){l&&f(e),le(t),c=!1,Te(a)}}}function We(n){let e,t,s,c;const a=[Xe,Ke],l=[];function r(_,o){return _[1]?1:0}return t=r(n),s=l[t]=a[t](n),{c(){e=m("div"),s.c(),this.h()},l(_){e=g(_,"DIV",{class:!0});var o=h(e);s.l(o),o.forEach(f),this.h()},h(){v(e,"class","rounded-lg border border-sky-500 text-sky-500 p-3")},m(_,o){$(_,e,o),l[t].m(e,null),c=!0},p(_,[o]){let i=t;t=r(_),t===i?l[t].p(_,o):(xe(),G(l[i],1,1,()=>{l[i]=null}),we(),s=l[t],s?s.p(_,o):(s=l[t]=a[t](_),s.c()),A(s,1),s.m(e,null))},i(_){c||(A(s),c=!0)},o(_){G(s),c=!1},d(_){_&&f(e),l[t].d()}}}function Ze(n,e,t){let{data:s}=e,c=!1;function a(){t(1,c=!c)}async function l(){try{await fetch(`/api/goly/${s.id}`,{method:"DELETE"}),setTimeout(()=>{Re("/",{invalidateAll:!0}),t(1,c=!1)},100),be.set("Successfully deleted.")}catch{be.set("An error has occurred. Please try again.")}}const r=()=>{alert("Goly copied to clipboard")};return n.$$set=_=>{"data"in _&&t(0,s=_.data)},[s,c,a,l,r]}class et extends X{constructor(e){super(),Q(this,e,Ze,We,W,{data:0})}}function ke(n,e,t){const s=n.slice();return s[1]=e[t],s}function Ee(n){let e,t;return e=new et({props:{data:n[1]}}),{c(){Z(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,c){te(e,s,c),t=!0},p(s,c){const a={};c&1&&(a.data=s[1]),e.$set(a)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){le(e,s)}}}function tt(n){let e,t,s,c,a,l=n[0].golies,r=[];for(let o=0;o<l.length;o+=1)r[o]=Ee(ke(n,l,o));const _=o=>G(r[o],1,1,()=>{r[o]=null});return{c(){e=m("h1"),t=x("Goly -- The Go URL Shortener"),s=k(),c=m("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=g(o,"H1",{class:!0});var i=h(e);t=w(i,"Goly -- The Go URL Shortener"),i.forEach(f),s=E(o),c=g(o,"DIV",{class:!0});var d=h(c);for(let b=0;b<r.length;b+=1)r[b].l(d);d.forEach(f),this.h()},h(){v(e,"class","text-3xl text-sky-500 my-5 text-center"),v(c,"class","py-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 px-10 align-center")},m(o,i){$(o,e,i),p(e,t),$(o,s,i),$(o,c,i);for(let d=0;d<r.length;d+=1)r[d].m(c,null);a=!0},p(o,[i]){if(i&1){l=o[0].golies;let d;for(d=0;d<l.length;d+=1){const b=ke(o,l,d);r[d]?(r[d].p(b,i),A(r[d],1)):(r[d]=Ee(b),r[d].c(),A(r[d],1),r[d].m(c,null))}for(xe(),d=l.length;d<r.length;d+=1)_(d);we()}},i(o){if(!a){for(let i=0;i<l.length;i+=1)A(r[i]);a=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)G(r[i]);a=!1},d(o){o&&f(e),o&&f(s),o&&f(c),Be(r,o)}}}function lt(n,e,t){let{data:s}=e;return n.$$set=c=>{"data"in c&&t(0,s=c.data)},[s]}class nt extends X{constructor(e){super(),Q(this,e,lt,tt,W,{data:0})}}export{nt as default};
